window.url=function(){function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}return function(r,n){var e=n||window.location.toString();if(!r)return e;r=r.toString(),"//"===e.substring(0,2)?e="http:"+e:1===e.split("://").length&&(e="http://"+e),n=e.split("/");var o={auth:""},i=n[2].split("@");1===i.length?i=i[0].split(":"):(o.auth=i[0],i=i[1].split(":")),o.protocol=n[0],o.hostname=i[0],o.port=i[1]||("https"===o.protocol.split(":")[0].toLowerCase()?"443":"80"),o.pathname=(n.length>3?"/":"")+n.slice(3,n.length).join("/").split("?")[0].split("#")[0];var l=o.pathname;"/"===l.charAt(l.length-1)&&(l=l.substring(0,l.length-1));var a=o.hostname,s=a.split("."),u=l.split("/");if("hostname"===r)return a;if("domain"===r)return/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/.test(a)?a:s.slice(-2).join(".");if("sub"===r)return s.slice(0,s.length-2).join(".");if("port"===r)return o.port;if("protocol"===r)return o.protocol.split(":")[0];if("auth"===r)return o.auth;if("user"===r)return o.auth.split(":")[0];if("pass"===r)return o.auth.split(":")[1]||"";if("path"===r)return o.pathname;if("."===r.charAt(0)){if(r=r.substring(1),t(r))return r=parseInt(r,10),s[0>r?s.length+r:r-1]||""}else{if(t(r))return r=parseInt(r,10),u[0>r?u.length+r:r]||"";if("file"===r)return u.slice(-1)[0];if("filename"===r)return u.slice(-1)[0].split(".")[0];if("fileext"===r)return u.slice(-1)[0].split(".")[1]||"";if("?"===r.charAt(0)||"#"===r.charAt(0)){var c=e,h=null;if("?"===r.charAt(0)?c=(c.split("?")[1]||"").split("#")[0]:"#"===r.charAt(0)&&(c=c.split("#")[1]||""),!r.charAt(1))return c;r=r.substring(1),c=c.split("&");for(var p=0,g=c.length;g>p;p++)if(h=c[p].split("="),h[0]===r)return h[1]||"";return null}}return""}}(),"undefined"!=typeof jQuery&&jQuery.extend({url:function(t,r){return window.url(t,r)}}),window.rgbHex=function(){function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function r(t){return t.replace(/^\s+|\s+$/g,"")}function n(n){return n=r(n),t(n)&&n>=0&&255>=n}function e(t){return/^[0-9a-f]{3}$|^[0-9a-f]{6}$/i.test(r(t))}function o(t){return t=parseInt(t,10).toString(16),1===t.length?"0"+t:t}function i(t){return parseInt(t,16).toString()}function l(r){return r=r.split(","),(3===r.length||4===r.length)&&n(r[0])&&n(r[1])&&n(r[2])&&(4!==r.length||t(r[3]))?"#"+o(r[0]).toUpperCase()+o(r[1]).toUpperCase()+o(r[2]).toUpperCase():null}function a(t){return e(t)?(3===t.length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),"rgb("+i(t.substr(0,2))+","+i(t.substr(2,2))+","+i(t.substr(4,2))+")"):void 0}function s(t){return t.replace(/\s/g,"")}return function(t){if(!t)return null;var n=null,e=/^rgba?\((.*)\);?$/,o=/^#/;return t=r(t.toString()),"transparent"===t||"rgba(0,0,0,0)"===s(t)?"transparent":e.test(t)?l(t.match(e)[1]):o.test(t)?a(t.split("#").reverse()[0]):(n=t.split(","),1===n.length?a(t):3===n.length||4===n.length?l(t):void 0)}}(),jQuery&&jQuery.extend({rgbHex:function(t){return window.rgbHex(t)}}),function(t){t.fn.colourBrightness=function(){function t(t){for(var r="";"html"!=t[0].tagName.toLowerCase()&&(r=t.css("background-color"),"rgba(0, 0, 0, 0)"==r||"transparent"==r);)t=t.parent();return r}var r,n,e,o,i=t(this);return i.match(/^rgb/)?(i=i.match(/rgba?\(([^)]+)\)/)[1],i=i.split(/ *, */).map(Number),r=i[0],n=i[1],e=i[2]):"#"==i[0]&&7==i.length?(r=parseInt(i.slice(1,3),16),n=parseInt(i.slice(3,5),16),e=parseInt(i.slice(5,7),16)):"#"==i[0]&&4==i.length&&(r=parseInt(i[1]+i[1],16),n=parseInt(i[2]+i[2],16),e=parseInt(i[3]+i[3],16)),o=(299*r+587*n+114*e)/1e3,125>o?this.removeClass("light").addClass("dark"):this.removeClass("dark").addClass("light"),this}}(jQuery),$(window).load(function(){function t(){var t,e,o;t=window.location.href,e=window.url("#",t),o=window.url("#",t)?window.url("#",t):window.url("-1",t),o?(o.match("^[0-9A-Fa-f]{3}$")||o.match("^[0-9A-Fa-f]{6}$"))&&(r.val("#"+o),colour=$.rgbHex(r.val()),colour?(n.val(colour),n.select()):n.val(""),$("body").css("background-color",n.val()),$("body").colourBrightness()):r.focus()}var r=$("#hex"),n=$("#rgb");$("#hex").val(),$("#rgb").val();window.onhashchange=t,t(),r.bind("blur keyup",function(t){colour=$.rgbHex($("#hex").val()),colour?$("#rgb").val(colour):$("#rgb").val(""),$("body").css("background-color",n.val()),$("body").colourBrightness(),13==t.keyCode&&n.select()}),n.bind("blur keyup",function(t){colour=$.rgbHex($("#rgb").val()),colour?$("#hex").val(colour):$("#hex").val(""),$("body").css("background-color",r.val()),$("body").colourBrightness(),13==t.keyCode&&r.select()})});